<!DOCTYPE html>
<html>
  <head>
    
    <title>Crunchy Data PostgreSQL Operator Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.55.6" />
<title>Prerequisites :: Crunchy Data PostgreSQL Operator Documentation</title>
<link rel="shortcut icon" href="https://crunchydata.github.io/postgres-operator/latest/favicon.png" type="image/x-icon" />
<link href="https://crunchydata.github.io/postgres-operator/latest/css/nucleus.css" rel="stylesheet">
<link href="https://crunchydata.github.io/postgres-operator/latest/theme-flex/style.css" rel="stylesheet">

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link href="https://crunchydata.github.io/postgres-operator/latest/css/Fort-Fonts.css" rel="stylesheet">
<link href="https://crunchydata.github.io/postgres-operator/latest/css/custom.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<script src="https://crunchydata.github.io/postgres-operator/latest/js/jquery-2.x.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.bundle.min.js" integrity="sha384-zDnhMsjVZfS3hiP7oCBRmfjkQC4fzxVxFhBx8Hkz2aZX8gEvA/jsP3eXRCvzTofP" crossorigin="anonymous"></script>
<script src="https://crunchydata.github.io/postgres-operator/latest/js/main.js"></script>
<script src="https://crunchydata.github.io/postgres-operator/latest/js/toc.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/crunchydata.github.io\/postgres-operator\/latest";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/installation/install-with-ansible/prerequisites/">
    
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  
<a class="navbar-brand" href="https://www.crunchydata.com/"><img alt="Crunchy Data" src="https://crunchydata.github.io/postgres-operator/latest/images/logo.svg"></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <ul class="navbar-nav mr-auto"></ul>
  <span class="navbar-text">
      <nav class="shortcuts">
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/postgres-operator" target="_blank" rel="noopener">
                    <i class='fab fa-github'></i> <label>Source</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://kubernetes.io/docs/" target="_blank" rel="noopener">
                    <i class='fas fa-bookmark'></i> <label>Kubernetes</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/postgres-operator/blob/master/LICENSE.md" target="_blank" rel="noopener">
                    <i class='fas fa-file-contract'></i> <label>License</label>
                  </a>
              </li>
      </nav>
  </span>
</nav>

<article>
  <aside>

    <ul class="menu">
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/auto-complete.js"></script>
        <link href="https://crunchydata.github.io/postgres-operator/latest/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/crunchydata.github.io\/postgres-operator\/latest";
          
        </script>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/latest/js/search.js"></script>
      </div>

      <hr>
      <a class="baselink" href="https://crunchydata.github.io/postgres-operator/latest/">Crunchy Data PostgreSQL Operator Documentation</a>
      <hr>
        <b>Available Formats</b>
        <nav class="downloads">
                <li class="" role="">
                    <a href="https://crunchydata.github.io/postgres-operator/latest/pdf/postgres_operator.pdf" target="_blank" rel="noopener">
                      <i class='fas fa-file-pdf'></i> <label>PDF</label>
                    </a>
                </li>
                <li class="" role="">
                    <a href="https://crunchydata.github.io/postgres-operator/latest/epub/postgres_operator.epub" target="_blank" rel="noopener">
                      <i class='fas fa-book'></i> <label>EPUB</label>
                    </a>
                </li>
        </nav>
        <hr>

      <b>Navigation</b>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/quickstart/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/quickstart/">Quickstart</a>

      </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/">Architecture</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/overview/">
            Overview
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/provisioning/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/provisioning/">
            Provisioning
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/disaster-recovery/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/disaster-recovery/">
            Disaster Recovery
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/high-availability/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/high-availability/">
            High-Availability
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/namespace/">
            Namespace Management
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/eventing/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/eventing/">
            Lifecycle Events
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/postgres-operator-containers-overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/postgres-operator-containers-overview/">
            PostgreSQL Containers
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/storage-overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/storage-overview/">
            Storage
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/users-role-overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/users-role-overview/">
            User &amp; Roles
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/architecture/tablespaces/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/architecture/tablespaces/">
            Tablespaces
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/configuration/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/">Configuration</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/configuration/compatibility/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/compatibility/">
            Compatibility Requirements
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/configuration/configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/configuration/">
            Configuration Resources
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/configuration/pgo-yaml-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/pgo-yaml-configuration/">
            PGO YAML
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/configuration/tls/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/configuration/tls/">
            TLS
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/installation/">Installation</a>
            <i class="fas fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/postgres-operator-installer/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/installation/postgres-operator-installer/">Deploy the PostgreSQL Operator with `kubectl`&#34;</a>

      </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/prereq/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/installation/prereq/">Prerequisites</a>

      </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/common-env/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/common-env/">
            Operator Environment
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/">Install Operator Using Ansible</a>
            <i class="fas fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/prerequisites/" class="dd-item active">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/prerequisites/">
            Prerequisites
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/installing-ansible/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/installing-ansible/">
            Installing Ansible
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/installing-operator/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/installing-operator/">
            Installing PostgreSQL Operator
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/installing-metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/installing-metrics/">
            Installing Metrics Infrastructure
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/updating-operator/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/updating-operator/">
            Updating PostgreSQL Operator
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/uninstalling-operator/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/uninstalling-operator/">
            Uninstalling PostgreSQL Operator
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/uninstalling-metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/uninstalling-metrics/">
            Uninstalling Metrics Stack
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/operator-install/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/operator-install/">
            Install Operator Using Bash
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/developer-setup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/installation/developer-setup/">
            Developer Setup
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/installation/install-pgo-client/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/installation/install-pgo-client/">Install `pgo` Client</a>

      </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/">Using the pgo Client</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/common-tasks/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/common-tasks/">
            Common pgo Client Tasks
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/">pgo Client Reference</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_apply/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_apply/">
            pgo apply
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_backup/">
            pgo backup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_cat/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_cat/">
            pgo cat
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_clone/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_clone/">
            pgo clone
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create/">
            pgo create
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_cluster/">
            pgo create cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_namespace/">
            pgo create namespace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_pgbouncer/">
            pgo create pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_pgorole/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_pgorole/">
            pgo create pgorole
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_pgouser/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_pgouser/">
            pgo create pgouser
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_policy/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_policy/">
            pgo create policy
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_schedule/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_schedule/">
            pgo create schedule
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_user/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_create_user/">
            pgo create user
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete/">
            pgo delete
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_backup/">
            pgo delete backup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_cluster/">
            pgo delete cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_label/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_label/">
            pgo delete label
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_namespace/">
            pgo delete namespace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_pgbouncer/">
            pgo delete pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_pgorole/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_pgorole/">
            pgo delete pgorole
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_pgouser/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_pgouser/">
            pgo delete pgouser
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_policy/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_policy/">
            pgo delete policy
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_schedule/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_schedule/">
            pgo delete schedule
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_user/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_delete_user/">
            pgo delete user
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_df/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_df/">
            pgo df
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_failover/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_failover/">
            pgo failover
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_label/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_label/">
            pgo label
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_load/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_load/">
            pgo load
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_reload/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_reload/">
            pgo reload
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_restore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_restore/">
            pgo restore
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_scale/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_scale/">
            pgo scale
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_scaledown/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_scaledown/">
            pgo scaledown
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show/">
            pgo show
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_backup/">
            pgo show backup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_cluster/">
            pgo show cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_config/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_config/">
            pgo show config
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_namespace/">
            pgo show namespace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_pgbouncer/">
            pgo show pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_pgorole/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_pgorole/">
            pgo show pgorole
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_pgouser/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_pgouser/">
            pgo show pgouser
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_policy/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_policy/">
            pgo show policy
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_pvc/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_pvc/">
            pgo show pvc
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_schedule/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_schedule/">
            pgo show schedule
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_user/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_user/">
            pgo show user
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_workflow/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_show_workflow/">
            pgo show workflow
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_status/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_status/">
            pgo status
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_test/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_test/">
            pgo test
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update/">
            pgo update
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_cluster/">
            pgo update cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_namespace/">
            pgo update namespace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_pgbouncer/">
            pgo update pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_pgorole/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_pgorole/">
            pgo update pgorole
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_pgouser/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_pgouser/">
            pgo update pgouser
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_user/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_update_user/">
            pgo update user
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_upgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_upgrade/">
            pgo upgrade
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_version/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_version/">
            pgo version
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_watch/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/pgo-client/reference/pgo_watch/">
            pgo watch
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/security/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/security/">RBAC Configuration</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/security/configure-postgres-operator-rbac/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/security/configure-postgres-operator-rbac/">
            Configuration of PostgreSQL Operator RBAC
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/security/install-postgres-operator-rbac/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/security/install-postgres-operator-rbac/">
            Installation of PostgreSQL Operator RBAC
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/security/api-encryption-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/security/api-encryption-configuration/">
            PostgreSQL Operator API Encryption Configuration
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/advanced/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/advanced/">Advanced Topics</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/advanced/custom-config/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/advanced/custom-config/">
            Custom Configuration
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/advanced/multi-zone-design-considerations/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/advanced/multi-zone-design-considerations/">
            Multi-Zone Cloud Considerations
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/advanced/direct-api-calls/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/advanced/direct-api-calls/">
            Rest API
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/upgrade/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/">Upgrade</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade35/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade35/">
            Upgrade PGO 3.5 Minor Versions
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade35to4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade35to4/">
            Upgrade PGO 3.5 to 4.3.0
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade4xto42_ansible/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade4xto42_ansible/">
            Upgrade PGO 4.X to 4.3.0 (Ansible)
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade4xto42_bash/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade4xto42_bash/">
            Upgrade PGO 4.X to 4.3.0 (Bash)
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade41/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgrade41/">
            Upgrade PostgreSQL Operator 4.1 Minor Versions
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgradeto35/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/upgrade/upgradeto35/">
            Upgrade to PGO 3.5 From Previous Versions
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/contributing/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/latest/contributing/">Contributing</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/contributing/documentation-updates/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/contributing/documentation-updates/">
            Updating Documentation
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/contributing/issues/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/contributing/issues/">
            Submitting Issues
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/latest/contributing/pull-requests/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/latest/contributing/pull-requests/">
            Submitting Pull Requests
          </a>
        </div>
    </li>
        </ul>
    </li>




      <hr><nav id="TableOfContents"></nav>



      <section>
      </section>
    </ul>
  </aside>
  <section class="page">

    <div class="nav-select">
      <center>Navigation :
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/quickstart/" >
   Quickstart</option>
    <option value="/architecture/" >
   Architecture</option>
    <option value="/configuration/" >
   Configuration</option>
    <option value="/installation/" >
   Installation</option> 
    <option value="/installation/postgres-operator-installer/" >
  - 
   Deploy the PostgreSQL Operator with `kubectl`&#34;</option>
    <option value="/installation/prereq/" >
  - 
   Prerequisites</option>
      <option value="/installation/common-env/" >- Operator Environment</option>
    <option value="/installation/install-with-ansible/" >
  - 
   Install Operator Using Ansible</option> 
      <option value="/installation/install-with-ansible/prerequisites/"  selected>-- Prerequisites</option>
      <option value="/installation/install-with-ansible/installing-ansible/" >-- Installing Ansible</option>
      <option value="/installation/install-with-ansible/installing-operator/" >-- Installing PostgreSQL Operator</option>
      <option value="/installation/install-with-ansible/installing-metrics/" >-- Installing Metrics Infrastructure</option>
      <option value="/installation/install-with-ansible/updating-operator/" >-- Updating PostgreSQL Operator</option>
      <option value="/installation/install-with-ansible/uninstalling-operator/" >-- Uninstalling PostgreSQL Operator</option>
      <option value="/installation/install-with-ansible/uninstalling-metrics/" >-- Uninstalling Metrics Stack</option>
  
      <option value="/installation/operator-install/" >- Install Operator Using Bash</option>
      <option value="/installation/developer-setup/" >- Developer Setup</option>
    <option value="/installation/install-pgo-client/" >
  - 
   Install `pgo` Client</option>
  
    <option value="/pgo-client/" >
   Using the pgo Client</option>
    <option value="/security/" >
   RBAC Configuration</option>
    <option value="/advanced/" >
   Advanced Topics</option>
    <option value="/upgrade/" >
   Upgrade</option>
    <option value="/contributing/" >
   Contributing</option>



        </select>
      </center>
    </div>

    
      <div id="top-bar">
        
          
          
          
        <div id="top-github-link">
          <a class="github-link" href="https://crunchydata.github.io/postgres-operator/latest/contributing/" target="blank">
            <i class="fa fa-info-circle"></i>
            
          </a>
          <a class="github-link" href="https://github.com/CrunchyData/postgres-operator/edit/develop/hugo/content/Installation/install-with-ansible/prerequisites.md" target="blank">
            <i class="fa fa-code-fork"></i>
            
          </a>
        </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            <span class="links">
            










 <a href='https://crunchydata.github.io/postgres-operator/latest/'>Crunchy PostgreSQL Operator</a> > <a href='https://crunchydata.github.io/postgres-operator/latest/installation/'>Installation</a> > <a href='https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/'>Install Operator Using Ansible</a> > Prerequisites

 

 

 


            </span>
        </div>

      </div>
    

    
    <div id="body-inner">

    <h1>Prerequisites</h1>

    

    
    

<h1 id="prerequisites">Prerequisites</h1>

<p>The following is required prior to installing Crunchy PostgreSQL Operator using Ansible:</p>

<ul>
<li><a href="https://github.com/CrunchyData/postgres-operator/">postgres-operator playbooks</a> source code for the target version</li>
<li>Ansible 2.8.0+</li>
</ul>

<h2 id="kubernetes-installs">Kubernetes Installs</h2>

<ul>
<li>Kubernetes v1.11+</li>
<li>Cluster admin privileges in Kubernetes</li>
<li><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">kubectl</a> configured to communicate with Kubernetes</li>
</ul>

<h2 id="openshift-installs">OpenShift Installs</h2>

<ul>
<li>OpenShift v3.09+</li>
<li>Cluster admin privileges in OpenShift</li>
<li><a href="https://docs.openshift.com/container-platform/3.11/cli_reference/get_started_cli.html">oc</a> configured to communicate with OpenShift</li>
</ul>

<h2 id="installing-from-a-windows-host">Installing from a Windows Host</h2>

<p>If the Crunchy PostgreSQL Operator is being installed from a Windows host the following
are required:</p>

<ul>
<li><a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">Windows Subsystem for Linux (WSL)</a></li>
<li><a href="https://www.microsoft.com/en-us/p/ubuntu/9nblggh4msv6">Ubuntu for Windows</a></li>
</ul>

<h2 id="environment">Environment</h2>

<p>Ensure the appropriate <a href="https://crunchydata.github.io/postgres-operator/latest/installation/common-env/">environment variables</a> are set.</p>

<h2 id="permissions">Permissions</h2>

<p>The installation of the Crunchy PostgreSQL Operator requires elevated privileges.<br />
It is required that the playbooks are run as a <code>cluster-admin</code> to ensure the playbooks
can install:</p>

<ul>
<li>Custom Resource Definitions</li>
<li>Cluster RBAC</li>
<li>Create required namespaces</li>
</ul>

<div class="notices warning" ><p>In Kubernetes versions prior to 1.12 (including Openshift up through 3.11), there is a limitation that requires an extra step during installation for the operator to function properly with watched namespaces. This limitation does not exist when using Kubernetes 1.12+. When a list of namespaces are provided through the NAMESPACE environment variable, the setupnamespaces.sh script handles the limitation properly in both the bash and ansible installation.</p>

<p>However, if the user wishes to add a new watched namespace after installation, where the user would normally use pgo create namespace to add the new namespace, they should instead run the add-targeted-namespace.sh script or they may give themselves cluster-admin privileges instead of having to run setupnamespaces.sh script. Again, this is only required when running on a Kubernetes distribution whose version is below 1.12. In Kubernetes version 1.12+ the pgo create namespace command works as expected.</p>
</div>

<h2 id="obtaining-operator-ansible-role">Obtaining Operator Ansible Role</h2>

<p>There are two ways to obtain the Crunchy PostgreSQL Operator Roles:</p>

<ul>
<li><p>Clone the <a href="https://github.com/CrunchyData/postgres-operator">postgres-operator project</a></p></li>

<li><p><code>postgres-operator-playbooks</code> RPM provided for Crunchy customers via the <a href="https://access.crunchydata.com/">Crunchy Access Portal</a>.</p></li>
</ul>

<h3 id="github-installation">GitHub Installation</h3>

<p>All necessary files (inventory, main playbook and roles) can be found in the <code>ansible</code>
directory in the  <a href="https://github.com/CrunchyData/postgres-operator">postgres-operator project</a>.</p>

<h3 id="rpm-installation-using-yum">RPM Installation using Yum</h3>

<p>Available to Crunchy customers is an RPM containing all the necessary Ansible roles
and files required for installation using Ansible.  The RPM can be found in Crunchy&rsquo;s
yum repository.  For information on setting up <code>yum</code> to use the Crunchy repoistory,
see the <a href="https://access.crunchydata.com/">Crunchy Access Portal</a>.</p>

<p>To install the Crunchy PostgreSQL Operator Ansible roles using <code>yum</code>, run the following
command on a RHEL or CentOS host:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo yum install postgres-operator-playbooks</code></pre></div>
<ul>
<li>Ansible roles can be found in: <code>/usr/share/ansible/roles/crunchydata</code></li>
<li>Ansible playbooks/inventory files can be found in: <code>/usr/share/ansible/postgres-operator/playbooks</code></li>
</ul>

<p>Once installed users should take a copy of the <code>inventory</code> file included in the installation
using the following command:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cp /usr/share/ansible/postgres-operator/playbooks/inventory <span style="color:#d88200">${</span><span style="color:#111">HOME</span><span style="color:#111">?</span><span style="color:#d88200">}</span></code></pre></div>
<h2 id="configuring-the-inventory-file">Configuring the Inventory File</h2>

<p>The <code>inventory</code> file included with the PostgreSQL Operator Playbooks allows installers
to configure how the operator will function when deployed into Kubernetes.  This file
should contain all configurable variables the playbooks offer.</p>

<h3 id="requirements">Requirements</h3>

<p>The following configuration parameters must be set in order to deploy the
Crunchy PostgreSQL Operator.</p>

<p>Additionally, <code>storage</code> variables will need to be defined to provide the Crunchy
PostgreSQL Operator with any required storage configuration.  Guidance for
defining <code>storage</code> variables can be found further in this documentation.</p>

<div class="notices tip" >You should remove or comment out variables either either the  <code>kubernetes</code> or
<code>openshift</code> variables if you are not being using them for your environment. Both
sets of variables cannot be used at the same time.</div>

<ul>
<li><code>archive_mode</code></li>
<li><code>archive_timeout</code></li>
<li><code>backup_storage</code></li>
<li><code>backrest</code></li>
<li><code>backrest_storage</code></li>
<li><code>badger</code></li>
<li><code>ccp_image_prefix</code></li>
<li><code>ccp_image_tag</code></li>
<li><code>create_rbac</code></li>
<li><code>db_password_length</code></li>
<li><code>db_port</code></li>
<li><code>db_replicas</code></li>
<li><code>db_user</code></li>
<li><code>disable_auto_failover</code>`</li>
<li><code>exporterport</code></li>
<li><code>kubernetes_context</code> (Comment out if deploying to am OpenShift environment)</li>
<li><code>metrics</code></li>
<li><code>openshift_host</code> (Comment out if deploying to a Kubernetes environment)</li>
<li><code>openshift_password</code> (Comment out if deploying to a Kubernetes environment)</li>
<li><code>openshift_skip_tls_verify</code> (Comment out if deploying to a Kubernetes environment)</li>
<li><code>openshift_token</code> (Comment out if deploying to a Kubernetes environment)</li>
<li><code>openshift_user</code> (Comment out if deploying to a Kubernetes environment)</li>
<li><code>pgbadgerport</code></li>
<li><code>pgo_admin_password</code></li>
<li><code>pgo_admin_perms</code></li>
<li><code>pgo_admin_role_name</code></li>
<li><code>pgo_admin_username</code></li>
<li><code>pgo_client_version</code></li>
<li><code>pgo_image_prefix</code></li>
<li><code>pgo_image_tag</code></li>
<li><code>pgo_installation_name</code></li>
<li><code>pgo_operator_namespace</code></li>
<li><code>primary_storage</code></li>
<li><code>replica_storage</code></li>
<li><code>scheduler_timeout</code></li>
</ul>

<h3 id="configuration-parameters">Configuration Parameters</h3>

<table>
<thead>
<tr>
<th>Name</th>
<th>Default</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>archive_mode</code></td>
<td>true</td>
<td><strong>Required</strong></td>
<td>Set to true enable archive logging on all newly created clusters.</td>
</tr>

<tr>
<td><code>archive_timeout</code></td>
<td>60</td>
<td><strong>Required</strong></td>
<td>Set to a value in seconds to configure the timeout threshold for archiving.</td>
</tr>

<tr>
<td><code>backrest</code></td>
<td>false</td>
<td><strong>Required</strong></td>
<td>Set to true enable pgBackRest capabilities on all newly created cluster request.  This can be disabled by the client.</td>
</tr>

<tr>
<td><code>backrest_aws_s3_bucket</code></td>
<td></td>
<td></td>
<td>Set to configure the bucket used by pgBackRest with Amazon Web Service S3 for backups and restoration in S3.</td>
</tr>

<tr>
<td><code>backrest_aws_s3_endpoint</code></td>
<td></td>
<td></td>
<td>Set to configure the endpoint used by pgBackRest with Amazon Web Service S3 for backups and restoration in S3.</td>
</tr>

<tr>
<td><code>backrest_aws_s3_key</code></td>
<td></td>
<td></td>
<td>Set to configure the key used by pgBackRest to authenticate with Amazon Web Service S3 for backups and restoration in S3.</td>
</tr>

<tr>
<td><code>backrest_aws_s3_region</code></td>
<td></td>
<td></td>
<td>Set to configure the region used by pgBackRest with Amazon Web Service S3 for backups and restoration in S3.</td>
</tr>

<tr>
<td><code>backrest_aws_s3_secret</code></td>
<td></td>
<td></td>
<td>Set to configure the secret used by pgBackRest to authenticate with Amazon Web Service S3 for backups and restoration in S3.</td>
</tr>

<tr>
<td><code>backrest_storage</code></td>
<td>storageos</td>
<td><strong>Required</strong></td>
<td>Set to configure which storage definition to use when creating volumes used by pgBackRest on all newly created clusters.</td>
</tr>

<tr>
<td><code>backup_storage</code></td>
<td>storageos</td>
<td><strong>Required</strong></td>
<td>Set to configure which storage definition to use when creating volumes used for storing logical backups created by <code>pg_dump</code>.</td>
</tr>

<tr>
<td><code>badger</code></td>
<td>false</td>
<td><strong>Required</strong></td>
<td>Set to true enable pgBadger capabilities on all newly created clusters.  This can be disabled by the client.</td>
</tr>

<tr>
<td><code>ccp_image_prefix</code></td>
<td>crunchydata</td>
<td><strong>Required</strong></td>
<td>Configures the image prefix used when creating containers from Crunchy Container Suite.</td>
</tr>

<tr>
<td><code>ccp_image_tag</code></td>
<td></td>
<td><strong>Required</strong></td>
<td>Configures the image tag (version) used when creating containers from Crunchy Container Suite.</td>
</tr>

<tr>
<td><code>cleanup</code></td>
<td>false</td>
<td></td>
<td>Set to configure the playbooks to delete all objects when uninstalling the Operator.  Note: this will delete all objects related to the Operator (including clusters provisioned).</td>
</tr>

<tr>
<td><code>create_rbac</code></td>
<td>true</td>
<td><strong>Required</strong></td>
<td>Set to <code>true</code> if the installer should create the RBAC resources required to run the PostgreSQL Operator.</td>
</tr>

<tr>
<td><code>crunchy_debug</code></td>
<td>false</td>
<td></td>
<td>Set to configure Operator to use debugging mode.  Note: this can cause sensitive data such as passwords to appear in Operator logs.</td>
</tr>

<tr>
<td><code>default_instance_memory</code></td>
<td>512Mi</td>
<td></td>
<td>The default amount of memory to request for a PostgreSQL instance</td>
</tr>

<tr>
<td><code>default_pgbackrest_memory</code></td>
<td>48Mi</td>
<td></td>
<td>The default amount of memory to request for a pgBackRest repository</td>
</tr>

<tr>
<td><code>default_pgbouncer_memory</code></td>
<td>24Mi</td>
<td></td>
<td>The default amount of memory to request for a pgBouncer instance</td>
</tr>

<tr>
<td><code>delete_metrics_namespace</code></td>
<td>false</td>
<td></td>
<td>Set to configure whether or not the metrics namespace (defined using variable <code>metrics_namespace</code>) is deleted when uninstalling the metrics infrastructure</td>
</tr>

<tr>
<td><code>delete_operator_namespace</code></td>
<td>false</td>
<td></td>
<td>Set to configure whether or not the PGO operator namespace (defined using variable <code>pgo_operator_namespace</code>) is deleted when uninstalling the PGO.</td>
</tr>

<tr>
<td><code>delete_watched_namespaces</code></td>
<td>false</td>
<td></td>
<td>Set to configure whether or not the PGO watched namespaces (defined using variable <code>namespace</code>) are deleted when uninstalling the PGO.</td>
</tr>

<tr>
<td><code>db_name</code></td>
<td>userdb</td>
<td></td>
<td>Set to a value to configure the default database name on all newly created clusters.</td>
</tr>

<tr>
<td><code>db_password_age_days</code></td>
<td>0</td>
<td></td>
<td>Set to a value in days to configure the expiration age on PostgreSQL role passwords on all newly created clusters. If set to &ldquo;0&rdquo;, this is the same as saying the password never expires</td>
</tr>

<tr>
<td><code>db_password_length</code></td>
<td>24</td>
<td><strong>Required</strong></td>
<td>Set to configure the size of passwords generated by the operator on all newly created roles.</td>
</tr>

<tr>
<td><code>db_port</code></td>
<td>5432</td>
<td><strong>Required</strong></td>
<td>Set to configure the default port used on all newly created clusters.</td>
</tr>

<tr>
<td><code>db_replicas</code></td>
<td>1</td>
<td><strong>Required</strong></td>
<td>Set to configure the amount of replicas provisioned on all newly created clusters.</td>
</tr>

<tr>
<td><code>db_user</code></td>
<td>testuser</td>
<td><strong>Required</strong></td>
<td>Set to configure the username of the dedicated user account on all newly created clusters.</td>
</tr>

<tr>
<td><code>disable_failover</code></td>
<td>false</td>
<td><strong>Required</strong></td>
<td>Set to true disable auto failover capabilities on all newly created cluster requests. This cannot be overriden by the client on a cluster create, but on a cluster update. Setting this is not generally recommend, as it disable high-availability capabilities.</td>
</tr>

<tr>
<td><code>exporterport</code></td>
<td>9187</td>
<td><strong>Required</strong></td>
<td>Set to configure the default port used to connect to postgres exporter.</td>
</tr>

<tr>
<td><code>grafana_admin_password</code></td>
<td></td>
<td></td>
<td>Set to configure the login password for the Grafana administrator.</td>
</tr>

<tr>
<td><code>grafana_admin_username</code></td>
<td>admin</td>
<td></td>
<td>Set to configure the login username for the Grafana administrator.</td>
</tr>

<tr>
<td><code>grafana_install</code></td>
<td>true</td>
<td></td>
<td>Set to true to install Crunchy Grafana to visualize metrics.</td>
</tr>

<tr>
<td><code>grafana_storage_access_mode</code></td>
<td></td>
<td></td>
<td>Set to the access mode used by the configured storage class for Grafana persistent volumes.</td>
</tr>

<tr>
<td><code>grafana_storage_class_name</code></td>
<td></td>
<td></td>
<td>Set to the name of the storage class used when creating Grafana persistent volumes.</td>
</tr>

<tr>
<td><code>grafana_volume_size</code></td>
<td></td>
<td></td>
<td>Set to the size of persistent volume to create for Grafana.</td>
</tr>

<tr>
<td><code>kubernetes_context</code></td>
<td></td>
<td><strong>Required</strong>, if deploying to Kubernetes</td>
<td>When deploying to Kubernetes, set to configure the context name of the kubeconfig to be used for authentication.</td>
</tr>

<tr>
<td><code>log_statement</code></td>
<td>none</td>
<td></td>
<td>Set to <code>none</code>, <code>ddl</code>, <code>mod</code>, or <code>all</code> to configure the statements that will be logged in PostgreSQL&rsquo;s logs on all newly created clusters.</td>
</tr>

<tr>
<td><code>metrics</code></td>
<td>false</td>
<td><strong>Required</strong></td>
<td>Set to true enable performance metrics on all newly created clusters.  This can be disabled by the client.</td>
</tr>

<tr>
<td><code>metrics_namespace</code></td>
<td>metrics</td>
<td></td>
<td>Configures the target namespace when deploying Grafana and/or Prometheus</td>
</tr>

<tr>
<td><code>namespace</code></td>
<td></td>
<td></td>
<td>Set to a comma delimited string of all the namespaces Operator will manage.</td>
</tr>

<tr>
<td><code>namespace_mode</code></td>
<td>dynamic</td>
<td><strong>Required</strong></td>
<td>Determines which <code>ClusterRoles</code> will be installed as required to enable various namespace functionality within the Operator. Valid values are <code>dynamic</code>, <code>readonly</code> or <code>disabled</code>. If <code>disabled</code> is selected, then no <code>ClusterRoles</code> are installed.</td>
</tr>

<tr>
<td><code>openshift_host</code></td>
<td></td>
<td><strong>Required</strong>, if deploying to OpenShift</td>
<td>When deploying to OpenShift, set to configure the hostname of the OpenShift cluster to connect to.</td>
</tr>

<tr>
<td><code>openshift_password</code></td>
<td></td>
<td><strong>Required</strong>, if deploying to OpenShift</td>
<td>When deploying to OpenShift, set to configure the password used for login.</td>
</tr>

<tr>
<td><code>openshift_skip_tls_verify</code></td>
<td></td>
<td><strong>Required</strong>, if deploying to OpenShift</td>
<td>When deploying to Openshift, set to ignore the integrity of TLS certificates for the OpenShift cluster.</td>
</tr>

<tr>
<td><code>openshift_token</code></td>
<td></td>
<td><strong>Required</strong>, if deploying to OpenShift</td>
<td>When deploying to OpenShift, set to configure the token used for login (when not using username/password authentication).</td>
</tr>

<tr>
<td><code>openshift_user</code></td>
<td></td>
<td><strong>Required</strong>, if deploying to OpenShift</td>
<td>When deploying to OpenShift, set to configure the username used for login.</td>
</tr>

<tr>
<td><code>pgbadgerport</code></td>
<td>10000</td>
<td><strong>Required</strong></td>
<td>Set to configure the default port used to connect to pgbadger.</td>
</tr>

<tr>
<td><code>pgo_add_os_ca_store</code></td>
<td>false</td>
<td></td>
<td>When true, includes system default certificate authorities</td>
</tr>

<tr>
<td><code>pgo_admin_username</code></td>
<td>admin</td>
<td><strong>Required</strong></td>
<td>Configures the pgo administrator username.</td>
</tr>

<tr>
<td><code>pgo_admin_password</code></td>
<td></td>
<td><strong>Required</strong></td>
<td>Configures the pgo administrator password.</td>
</tr>

<tr>
<td><code>pgo_admin_perms</code></td>
<td><code>*</code></td>
<td><strong>Required</strong></td>
<td>Sets the access control rules provided by the PostgreSQL Operator RBAC resources for the PostgreSQL Operator administrative account that is created by this installer. Defaults to allowing all of the permissions, which is represented with the <code>*</code></td>
</tr>

<tr>
<td><code>pgo_admin_role_name</code></td>
<td>pgoadmin</td>
<td><strong>Required</strong></td>
<td>Sets the name of the PostgreSQL Operator role that is utilized for administrative operations performed by the PostgreSQL Operator.</td>
</tr>

<tr>
<td><code>pgo_apiserver_port</code></td>
<td>8443</td>
<td></td>
<td>Set to configure the port used by the Crunchy PostgreSQL Operator apiserver.</td>
</tr>

<tr>
<td><code>pgo_client_install</code></td>
<td>true</td>
<td></td>
<td>Configures the playbooks to install the <code>pgo</code> client if set to true.</td>
</tr>

<tr>
<td><code>pgo_client_version</code></td>
<td></td>
<td><strong>Required</strong></td>
<td>Configures which version of <code>pgo</code> the playbooks should install.</td>
</tr>

<tr>
<td><code>pgo_disable_eventing</code></td>
<td>false</td>
<td></td>
<td>Set to configure whether or not eventing should be enabled for the Crunchy PostgreSQL Operator installation.</td>
</tr>

<tr>
<td><code>pgo_disable_tls</code></td>
<td>false</td>
<td></td>
<td>Set to configure whether or not TLS should be enabled for the Crunchy PostgreSQL Operator apiserver.</td>
</tr>

<tr>
<td><code>pgo_image_prefix</code></td>
<td>crunchydata</td>
<td><strong>Required</strong></td>
<td>Configures the image prefix used when creating containers for the Crunchy PostgreSQL Operator (apiserver, operator, scheduler..etc).</td>
</tr>

<tr>
<td><code>pgo_image_tag</code></td>
<td></td>
<td><strong>Required</strong></td>
<td>Configures the image tag used when creating containers for the Crunchy PostgreSQL Operator (apiserver, operator, scheduler..etc)</td>
</tr>

<tr>
<td><code>pgo_installation_name</code></td>
<td></td>
<td><strong>Required</strong></td>
<td>The name of the PGO installation.</td>
</tr>

<tr>
<td><code>pgo_noauth_routes</code></td>
<td></td>
<td></td>
<td>Configures URL routes with mTLS and HTTP BasicAuth disabled.</td>
</tr>

<tr>
<td><code>pgo_operator_namespace</code></td>
<td></td>
<td><strong>Required</strong></td>
<td>Set to configure the namespace where Operator will be deployed.</td>
</tr>

<tr>
<td><code>pgo_tls_ca_store</code></td>
<td></td>
<td></td>
<td>Set to add additional Certificate Authorities for Operator to trust (PEM-encoded file).</td>
</tr>

<tr>
<td><code>pgo_tls_no_verify</code></td>
<td>false</td>
<td></td>
<td>Set to configure Operator to verify TLS certificates.</td>
</tr>

<tr>
<td><code>pgo_client_container_install</code></td>
<td>false</td>
<td></td>
<td>Installs the pgo-client deployment along with ansible install</td>
</tr>

<tr>
<td><code>pgo_apiserver_url</code></td>
<td><code>https://postgres-operator</code></td>
<td></td>
<td>Sets the <code>pgo_apiserver_url</code> in the pgo-client deployment</td>
</tr>

<tr>
<td><code>pgo_client_cert_secret</code></td>
<td><code>pgo.tls</code></td>
<td></td>
<td>Sets the secret that the pgo-client will use when connecting to the operator. Secret should hold the TLS certs</td>
</tr>

<tr>
<td><code>pod_anti_affinity</code></td>
<td>preferred</td>
<td></td>
<td>Sets the default pod anti-affinity for the deployed PostgreSQL clusters, which is applied to the PostgreSQL instances, the pgBackRest repository, and any pgBouncer instances</td>
</tr>

<tr>
<td><code>pod_anti_affinity_pgbackrest</code></td>
<td></td>
<td></td>
<td>If set, overrides the value of <code>pod_anti_affinity</code> for just the pgBackRest repository</td>
</tr>

<tr>
<td><code>pod_anti_affinity_pgbouncer</code></td>
<td></td>
<td></td>
<td>If set, overrides the value of <code>pod_anti_affinity</code> for just the pgBouncer Pods</td>
</tr>

<tr>
<td><code>primary_storage</code></td>
<td>storageos</td>
<td><strong>Required</strong></td>
<td>Set to configure which storage definition to use when creating volumes used by PostgreSQL primaries on all newly created clusters.</td>
</tr>

<tr>
<td><code>prometheus_install</code></td>
<td>true</td>
<td></td>
<td>Set to true to install Crunchy Prometheus timeseries database.</td>
</tr>

<tr>
<td><code>prometheus_storage_access_mode</code></td>
<td></td>
<td></td>
<td>Set to the access mode used by the configured storage class for Prometheus persistent volumes.</td>
</tr>

<tr>
<td><code>prometheus_storage_class_name</code></td>
<td></td>
<td></td>
<td>Set to the name of the storage class used when creating Prometheus persistent volumes.</td>
</tr>

<tr>
<td><code>replica_storage</code></td>
<td>storageos</td>
<td><strong>Required</strong></td>
<td>Set to configure which storage definition to use when creating volumes used by PostgreSQL replicas on all newly created clusters.</td>
</tr>

<tr>
<td><code>scheduler_timeout</code></td>
<td>3600</td>
<td><strong>Required</strong></td>
<td>Set to a value in seconds to configure the <code>pgo-scheduler</code> timeout threshold when waiting for schedules to complete.</td>
</tr>

<tr>
<td><code>service_type</code></td>
<td>ClusterIP</td>
<td></td>
<td>Set to configure the type of Kubernetes service provisioned on all newly created clusters.</td>
</tr>

<tr>
<td><code>sync_replication</code></td>
<td>false</td>
<td></td>
<td>If set to true, defaults the PostgreSQL clusters to be deployed with synchronous replication</td>
</tr>

<tr>
<td><code>pgo_cluster_admin</code></td>
<td>false</td>
<td></td>
<td>Determines whether or not the <code>cluster-admin</code> role is assigned to the PGO service account. Must be <code>true</code> to enable PGO namespace &amp; role creation when installing in OpenShift.</td>
</tr>
</tbody>
</table>

<div class="notices tip" ><p>To retrieve the <code>kubernetes_context</code> value for Kubernetes installs, run the following command:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl config current-context</code></pre></div></div>

<h2 id="storage">Storage</h2>

<p>Kubernetes and OpenShift offer support for a wide variety of different storage types, and by default, the <code>inventory</code> is
pre-populated with storage configurations for some of these storage types.  However, the storage types defined
in the <code>inventory</code> can be modified or removed as needed, while additional storage configurations can also be
added to meet the specific storage requirements for your PG clusters.</p>

<p>The following <code>storage</code> variables are utilized to add or modify operator storage configurations in the <code>inventory</code>:</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>storage&lt;ID&gt;_name</code></td>
<td>Yes</td>
<td>Set to specify a name for the storage configuration.</td>
</tr>

<tr>
<td><code>storage&lt;ID&gt;_access_mode</code></td>
<td>Yes</td>
<td>Set to configure the access mode of the volumes created when using this storage definition.</td>
</tr>

<tr>
<td><code>storage&lt;ID&gt;_size</code></td>
<td>Yes</td>
<td>Set to configure the size of the volumes created when using this storage definition.</td>
</tr>

<tr>
<td><code>storage&lt;ID&gt;_class</code></td>
<td>Required when using the <code>dynamic</code> storage type</td>
<td>Set to configure the storage class name used when creating dynamic volumes.</td>
</tr>

<tr>
<td><code>storage&lt;ID&gt;_supplemental_groups</code></td>
<td>Required when using NFS storage</td>
<td>Set to configure any supplemental groups that should be added to security contexts on newly created clusters.</td>
</tr>

<tr>
<td><code>storage&lt;ID&gt;_type</code></td>
<td>Yes</td>
<td>Set to either <code>create</code> or <code>dynamic</code> to configure the operator to create persistent volumes or have them created dynamically by a storage class.</td>
</tr>
</tbody>
</table>

<p>The <code>ID</code> portion of <code>storage</code> prefix for each variable name above should be an integer that is used to group the various <code>storage</code> variables into a single storage configuration.  For instance, the following shows a single storage configuration for NFS storage:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75af00">storage3_name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;nfsstorage&#39;</span>
<span style="color:#75af00">storage3_access_mode</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;ReadWriteMany&#39;</span>
<span style="color:#75af00">storage3_size</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;1G&#39;</span>
<span style="color:#75af00">storage3_type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;create&#39;</span>
<span style="color:#75af00">storage3_supplemental_groups</span><span style="color:#f92672">=</span><span style="color:#d88200">65534</span></code></pre></div>
<p>As this example storage configuration shows, integer <code>3</code> is used as the ID for each of the <code>storage</code> variables, which together form a single storage configuration called <code>nfsstorage</code>.  This approach allows different storage configurations to be created by defining the proper <code>storage</code> variables with a unique ID for each required storage configuration.</p>

<p>Additionally, once all storage configurations have been defined in the <code>inventory</code>, they can then be used to specify the default storage configuration that should be utilized for the various PG pods created by the operator.  This is done using the following variables, which are also defined in the <code>inventory</code>:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75af00">backrest_storage</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;nfsstorage&#39;</span>
<span style="color:#75af00">backup_storage</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;nfsstorage&#39;</span>
<span style="color:#75af00">primary_storage</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;nfsstorage&#39;</span>
<span style="color:#75af00">replica_storage</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;nfsstorage&#39;</span></code></pre></div>
<p>With the configuration shown above, the <code>nfsstorage</code> storage configuration would be used by default for the various containers created for a PG cluster (i.e. containers for the primary DB, replica DB&rsquo;s, backups and/or <code>pgBackRest</code>).</p>

<h3 id="examples">Examples</h3>

<p>The following are additional examples of storage configurations for various storage types.</p>

<h4 id="generic-storage-class">Generic Storage Class</h4>

<p>The following example defines a storageTo setup storage1 to use the storage class <code>fast</code></p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75af00">storage5_name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;storageos&#39;</span>
<span style="color:#75af00">storage5_access_mode</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;ReadWriteOnce&#39;</span>
<span style="color:#75af00">storage5_size</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;5Gi&#39;</span>
<span style="color:#75af00">storage5_type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;dynamic&#39;</span>
<span style="color:#75af00">storage5_class</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;fast&#39;</span></code></pre></div>
<p>To assign this storage definition to all <code>primary</code> pods created by the Operator, we
can configure the <code>primary_storage=storageos</code> variable in the inventory file.</p>

<h4 id="gke">GKE</h4>

<p>The storage class provided by Google Kubernetes Environment (GKE) can be configured
to be used by the Operator by setting the following variables in the <code>inventory</code> file:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75af00">storage8_name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;gce&#39;</span>
<span style="color:#75af00">storage8_access_mode</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;ReadWriteOnce&#39;</span>
<span style="color:#75af00">storage8_size</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;300M&#39;</span>
<span style="color:#75af00">storage8_type</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;dynamic&#39;</span>
<span style="color:#75af00">storage8_class</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;standard&#39;</span></code></pre></div>
<p>To assign this storage definition to all <code>primary</code> pods created by the Operator, we
can configure the <code>primary_storage=gce</code> variable in the inventory file.</p>

<h3 id="considerations-for-multi-zone-cloud-environments">Considerations for Multi-Zone Cloud Environments</h3>

<p>When using the Operator in a Kubernetes cluster consisting of nodes that span
multiple zones, special consideration must betaken to ensure all pods and the
volumes they require are scheduled and provisioned within the same zone.  Specifically,
being that a pod is unable mount a volume that is located in another zone, any
volumes that are dynamically provisioned must be provisioned in a topology-aware
manner according to the specific scheduling requirements for the pod. For instance,
this means ensuring that the volume containing the database files for the primary
database in a new PostgreSQL cluster is provisioned in the same zone as the node
containing the PostgreSQL primary pod that will be using it.</p>

<h2 id="resource-configuration">Resource Configuration</h2>

<p>Kubernetes and OpenShift allow specific resource requirements to be specified for the various containers deployed inside of a pod.
This includes defining the required resources for each container, i.e. how much memory and CPU each container will need, while also
allowing resource limits to be defined, i.e. the maximum amount of memory and CPU a container will be allowed to consume.
In support of this capability, the Crunchy PGO allows any required resource configurations to be defined in the <code>inventory</code>, which
can the be utilized by the operator to set any desired resource requirements/limits for the various containers that will
be deployed by the Crunchy PGO when creating and managing PG clusters.</p>

<p>The following <code>resource</code> variables are utilized to add or modify operator resource configurations in the <code>inventory</code>:</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>resource&lt;ID&gt;_requests_memory</code></td>
<td>Yes</td>
<td>The amount of memory required by the container.</td>
</tr>

<tr>
<td><code>resource&lt;ID&gt;_requests_cpu</code></td>
<td>Yes</td>
<td>The amount of CPU required by the container.</td>
</tr>

<tr>
<td><code>resource&lt;ID&gt;_limits_memory</code></td>
<td>Yes</td>
<td>The maximum amount of memory that can be consumed by the container.</td>
</tr>

<tr>
<td><code>resource&lt;ID&gt;_limits_cpu</code></td>
<td>Yes</td>
<td>The maximum amount of CPU that can be consumed by the container.</td>
</tr>
</tbody>
</table>

<p>The <code>ID</code> portion of <code>resource</code> prefix for each variable name above should be an integer that is used to group the various <code>resource</code> variables into a single resource configuration.  For instance, the following shows a single resource configuration called <code>small</code>:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75af00">resource1_name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;small&#39;</span>
<span style="color:#75af00">resource1_requests_memory</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;512Mi&#39;</span>
<span style="color:#75af00">resource1_requests_cpu</span><span style="color:#f92672">=</span><span style="color:#d88200">0.1</span>
<span style="color:#75af00">resource1_limits_memory</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;512Mi&#39;</span>
<span style="color:#75af00">resource1_limits_cpu</span><span style="color:#f92672">=</span><span style="color:#d88200">0.1</span></code></pre></div>
<p>As this example resource configuration shows, integer <code>1</code> is used as the ID for each of the <code>resource</code> variables, which together form a single resource configuration called <code>small</code>.  This approach allows different resource configurations to be created by defining the proper <code>resource</code> variables with a unique ID for each required resource configuration.</p>

<p>With the configuration shown above, the <code>large</code> resource configuration would be used by default for all database containers, while the <code>small</code> resource configuration would then be utilized by default for the various other containers created for a PG cluster.</p>

<h2 id="understanding-pgo-operator-namespace-namespace">Understanding <code>pgo_operator_namespace</code> &amp; <code>namespace</code></h2>

<p>The Crunchy PostgreSQL Operator can be configured to be deployed and manage a single
namespace or manage several namespaces.  The following are examples of different types
of deployment models configurable in the <code>inventory</code> file.</p>

<h3 id="single-namespace">Single Namespace</h3>

<p>To deploy the Crunchy PostgreSQL Operator to work with a single namespace (in this example
our namespace is named <code>pgo</code>), configure the following <code>inventory</code> settings:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75af00">pgo_operator_namespace</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;pgo&#39;</span>
<span style="color:#75af00">namespace</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;pgo&#39;</span></code></pre></div>
<h3 id="multiple-namespaces">Multiple Namespaces</h3>

<p>To deploy the Crunchy PostgreSQL Operator to work with multiple namespaces (in this example
our namespaces are named <code>pgo</code>, <code>pgouser1</code> and <code>pgouser2</code>), configure the following <code>inventory</code> settings:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75af00">pgo_operator_namespace</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;pgo&#39;</span>
<span style="color:#75af00">namespace</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;pgouser1,pgouser2&#39;</span></code></pre></div>
<h2 id="deploying-multiple-operators">Deploying Multiple Operators</h2>

<p>The 4.0 release of the Crunchy PostgreSQL Operator allows for multiple operator deployments in the same cluster.<br />
To install the Crunchy PostgreSQL Operator to multiple namespaces, it&rsquo;s recommended to have an <code>inventory</code> file
for each deployment of the operator.</p>

<p>For each operator deployment the following inventory variables should be configured uniquely for each install.</p>

<p>For example, operator could be deployed twice by changing the <code>pgo_operator_namespace</code> and <code>namespace</code> for those
deployments:</p>

<p>Inventory A would deploy operator to the <code>pgo</code> namespace and it would manage the <code>pgo</code> target namespace.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-init" data-lang="init"># Inventory A
pgo_operator_namespace=&#39;pgo&#39;
namespace=&#39;pgo&#39;
...</code></pre></div>
<p>Inventory B would deploy operator to the <code>pgo2</code> namespace and it would manage the <code>pgo2</code> and <code>pgo3</code> target namespaces.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-init" data-lang="init"># Inventory B
pgo_operator_namespace=&#39;pgo2&#39;
namespace=&#39;pgo2,pgo3&#39;
...</code></pre></div>
<p>Each install of the operator will create a corresponding directory in <code>$HOME/.pgo/&lt;PGO NAMESPACE&gt;</code> which will contain
the TLS and <code>pgouser</code> client credentials.</p>

<h2 id="deploying-grafana-and-prometheus">Deploying Grafana and Prometheus</h2>

<p>PostgreSQL clusters created by the operator can be configured to create additional containers for collecting metrics.<br />
These metrics are very useful for understanding the overall health and performance of PostgreSQL database deployments
over time.  The collectors included by the operator are:</p>

<ul>
<li>PostgreSQL Exporter - PostgreSQL metrics</li>
</ul>

<p>The operator, however, does not install the necessary timeseries database (Prometheus) for storing the collected
metrics or the front end visualization (Grafana) of those metrics.</p>

<p>Included in these playbooks are roles for deploying Granfana and/or Prometheus.  See the <code>inventory</code> file
for options to install the metrics stack.</p>

<div class="notices tip" >At this time the Crunchy PostgreSQL Operator Playbooks only support storage classes.</div>



    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/" title="Install Operator Using Ansible"> <i class="fa fa-chevron-left"></i><label>Install Operator Using Ansible</label></a>
    <a class="nav nav-next" href="https://crunchydata.github.io/postgres-operator/latest/installation/install-with-ansible/installing-ansible/" title="Installing Ansible" style="margin-right: 0px;"><label>Installing Ansible</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

  </div>


	<div>
	</div>
</footer>

<link href="https://crunchydata.github.io/postgres-operator/latest/css/featherlight.min.css" rel="stylesheet">
<script src="https://crunchydata.github.io/postgres-operator/latest/js/featherlight.min.js"></script>

<script src="https://crunchydata.github.io/postgres-operator/latest/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>
